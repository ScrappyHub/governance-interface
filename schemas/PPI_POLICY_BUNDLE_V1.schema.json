{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PPI_POLICY_BUNDLE_V1",
  "type": "object",
  "required": [
    "schema",
    "policy_key",
    "policy_version",
    "conflict_mode",
    "rules"
  ],
  "properties": {
    "schema": {
      "type": "string",
      "const": "PPI_POLICY_BUNDLE_V1"
    },
    "policy_key": {
      "type": "string",
      "description": "Stable identifier for the policy family"
    },
    "policy_version": {
      "type": "string",
      "description": "Pinned version string; must match request.policy_version"
    },
    "conflict_mode": {
      "type": "string",
      "enum": ["DENY_ON_CONFLICT", "PRIORITY_ORDER"],
      "description": "How conflicts resolve. Default should be DENY_ON_CONFLICT."
    },
    "priority_order": {
      "type": "array",
      "items": { "type": "string" },
      "description": "If conflict_mode=PRIORITY_ORDER, this defines rule_key precedence."
    },
    "rules": {
      "type": "array",
      "items": { "$ref": "./PPI_RULE_NODE_V1.schema.json" },
      "minItems": 1
    }
  },
  "additionalProperties": false
}
